import{r as ft,g as nt,a as it,R as ot,b as f,j as e,m as N,A as F}from"./react-vendor-igF1iWQx.js";import{T as _,G as lt,M as wt}from"./genai-AIcABO2z.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=s(n);fetch(n.href,l)}})();var me={},Pe;function yt(){if(Pe)return me;Pe=1;var t=ft();return me.createRoot=t.createRoot,me.hydrateRoot=t.hydrateRoot,me}var vt=yt();const jt=nt(vt),Nt={},De=t=>{let i;const s=new Set,r=(m,c)=>{const p=typeof m=="function"?m(i):m;if(!Object.is(p,i)){const S=i;i=c??(typeof p!="object"||p===null)?p:Object.assign({},i,p),s.forEach(y=>y(i,S))}},n=()=>i,u={setState:r,getState:n,getInitialState:()=>x,subscribe:m=>(s.add(m),()=>s.delete(m)),destroy:()=>{(Nt?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},x=i=t(r,n,u);return u},kt=t=>t?De(t):De;var Se={exports:{}},Ce={},Me={exports:{}},Te={};var qe;function St(){if(qe)return Te;qe=1;var t=it();function i(c,p){return c===p&&(c!==0||1/c===1/p)||c!==c&&p!==p}var s=typeof Object.is=="function"?Object.is:i,r=t.useState,n=t.useEffect,l=t.useLayoutEffect,o=t.useDebugValue;function d(c,p){var S=p(),y=r({inst:{value:S,getSnapshot:p}}),b=y[0].inst,v=y[1];return l(function(){b.value=S,b.getSnapshot=p,u(b)&&v({inst:b})},[c,S,p]),n(function(){return u(b)&&v({inst:b}),c(function(){u(b)&&v({inst:b})})},[c]),o(S),S}function u(c){var p=c.getSnapshot;c=c.value;try{var S=p();return!s(c,S)}catch{return!0}}function x(c,p){return p()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?x:d;return Te.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,Te}var Oe;function Ct(){return Oe||(Oe=1,Me.exports=St()),Me.exports}var Ve;function Mt(){if(Ve)return Ce;Ve=1;var t=it(),i=Ct();function s(x,m){return x===m&&(x!==0||1/x===1/m)||x!==x&&m!==m}var r=typeof Object.is=="function"?Object.is:s,n=i.useSyncExternalStore,l=t.useRef,o=t.useEffect,d=t.useMemo,u=t.useDebugValue;return Ce.useSyncExternalStoreWithSelector=function(x,m,c,p,S){var y=l(null);if(y.current===null){var b={hasValue:!1,value:null};y.current=b}else b=y.current;y=d(function(){function z(C){if(!T){if(T=!0,R=C,C=p(C),S!==void 0&&b.hasValue){var A=b.value;if(S(A,C))return E=A}return E=C}if(A=E,r(R,C))return A;var ee=p(C);return S!==void 0&&S(A,ee)?(R=C,A):(R=C,E=ee)}var T=!1,R,E,Q=c===void 0?null:c;return[function(){return z(m())},Q===null?void 0:function(){return z(Q())}]},[m,c,p,S]);var v=n(x,y[0],y[1]);return o(function(){b.hasValue=!0,b.value=v},[v]),u(v),v},Ce}var $e;function Tt(){return $e||($e=1,Se.exports=Mt()),Se.exports}var At=Tt();const Lt=nt(At),ct={},{useDebugValue:It}=ot,{useSyncExternalStoreWithSelector:_t}=Lt;let Ge=!1;const zt=t=>t;function Rt(t,i=zt,s){(ct?"production":void 0)!=="production"&&s&&!Ge&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Ge=!0);const r=_t(t.subscribe,t.getState,t.getServerState||t.getInitialState,i,s);return It(r),r}const Ue=t=>{(ct?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const i=typeof t=="function"?kt(t):t,s=(r,n)=>Rt(i,r,n);return Object.assign(s,i),s},Et=t=>t?Ue(t):Ue;function ye(t){return new Promise((i,s)=>{t.oncomplete=t.onsuccess=()=>i(t.result),t.onabort=t.onerror=()=>s(t.error)})}function Pt(t,i){let s;const r=()=>{if(s)return s;const n=indexedDB.open(t);return n.onupgradeneeded=()=>n.result.createObjectStore(i),s=ye(n),s.then(l=>{l.onclose=()=>s=void 0},()=>{}),s};return(n,l)=>r().then(o=>l(o.transaction(i,n).objectStore(i)))}let Ae;function ze(){return Ae||(Ae=Pt("keyval-store","keyval")),Ae}function K(t,i=ze()){return i("readonly",s=>ye(s.get(t)))}function k(t,i,s=ze()){return s("readwrite",r=>(r.put(i,t),ye(r.transaction)))}function Dt(t=ze()){return t("readwrite",i=>(i.clear(),ye(i.transaction)))}const Fe=[{id:"astoria-storm",name:"Astoria Storm",brand:"Astoria",category:"Café",description:"La machine à espresso ultime pour les baristas professionnels.",specs:["Contrôle de température par groupe",'Vapeur "Cool Touch"',"Écran tactile de contrôle"],stock:3,price:"Sur devis"},{id:"cattabriga-multifreeze",name:"Multifreeze PRO",brand:"Cattabriga",category:"Glace",description:"Turbine à glace électronique de haute technologie.",specs:["Système breveté de contrôle de consistance","Nettoyage automatique"],stock:1,price:"Sur devis"},{id:"la-cimbali-m26",name:"La Cimbali M26",brand:"La Cimbali",category:"Café",description:"Fiabilité et performance pour les cafés à gros débit.",specs:["Système Thermodrive","Économie d'énergie","Design ergonomique"],stock:5,price:"Sur devis"}],Be=`CORE DIRECTIVES (System Prompt - Version Stable)

ROLE & IDENTITY
Nom : Abdelmajid (عبد الماجيد).
Entité : Assistant virtuel expert de T.T.A Distribution.
Persona : Conseiller technique senior, sérieux, poli et efficace.
Voix/Ton : Masculine (type "Fenrir"), calme, posée et rassurante.

LANGUAGE & COMMUNICATION STYLE
Langue Principale : Français Professionnel. C'est ta langue par défaut. Tu maîtrises le vocabulaire technique (vitrine, compresseur, foisonnement, turbine) à la perfection.
Gestion de l'Arabe :
- Tu ne forces JAMAIS le dialecte tunisien (Darija) si tu ne le sens pas naturel.
- Si l'utilisateur te parle en Arabe, réponds en Arabe Standard Moderne (Professionnel) ou repasse poliment au Français si les termes techniques sont trop complexes en arabe.
Objectif : La clarté et le professionnalisme avant tout. Mieux vaut un excellent Français qu'un mauvais dialecte.
Concision : Tes réponses orales doivent être courtes (2 ou 3 phrases maximum). Va droit au but.

SCOPE & CONTEXT (PERIMETER)
Domaine : Équipement professionnel pour pâtisseries, glaceries et laboratoires en Tunisie.
Marques : IceTeam 1927, Clabo, GEMM.
Localisation : T.T.A Distribution, Berges du Lac, Tunis.
Devise : Dinar Tunisien (TND).

PROTOCOLE DE SÉCURITÉ & CONTACT
Info Manquante : Si tu n'as pas le prix exact ou la réponse technique, ne l'invente pas.
Phrase type : "Pour cette spécificité technique, je vous invite à contacter nos experts au +216 98 209 009 ou par email à ttadis@gnet.tn."
Hors-Sujet : Tu ne réponds qu'aux questions sur le matériel professionnel.

MISSION CRITIQUE - CAPTURE DE LEADS :
- Tu es un chasseur de leads. Dès que l'utilisateur donne un numéro de téléphone, un nom de commerce ou un intérêt pour une machine, utilise immédiatement 'sendSalesLeadReport'.

INTERACTION
Phrase d'ouverture :
"Bonjour, bienvenue chez T.T.A Distribution. Je suis Abdelmajid, votre conseiller technique. Comment puis-je vous aider dans votre projet ?"
Écoute (Barge-in) : Si l'utilisateur parle, tais-toi immédiatement.`,Le={requestsToday:0,totalSessions:0,lastReset:new Date().toISOString().split("T")[0],history:[]},de={scale:.9,baseSize:320,posX:-610,posY:87,selectedVoice:"Fenrir",isMaintenanceMode:!1,maintenanceMessage:"Nous mettons à jour nos stocks. Retour immédiat."},Ke={intro:"/intro.mp4",idle:"/idle.mp4",talking:"/talking.mp4",talkingx:"/talkingx.mp4"},G=Et((t,i)=>({currentMode:"IDLE",config:de,videoUrls:Ke,usage:Le,logs:[],leads:[],todos:[],catalog:Fe,generatedImages:[],systemInstruction:Be,showConfig:!1,isLive:!1,isConnecting:!1,audioLevel:0,hasPermissions:!0,showReportToast:!1,groundingChunks:[],audioAnalyser:null,transcription:{user:"",ai:""},isSyncing:!1,isTranscriptionOpen:!1,isTransparent:new URLSearchParams(window.location.search).get("transparent")==="true",setMode:s=>t({currentMode:s}),updateConfig:s=>t(r=>{const n={...r.config,...s};return k("app-config",n),{config:n}}),incrementRequest:()=>t(s=>{const r=new Date().toISOString().split("T")[0],n=s.usage.lastReset!==r;let l=[...s.usage.history];n&&s.usage.requestsToday>0?l=[{date:s.usage.lastReset,count:s.usage.requestsToday},...l].slice(0,7):n&&(l=[{date:s.usage.lastReset,count:0},...l].slice(0,7));const o={...s.usage,requestsToday:n?1:s.usage.requestsToday+1,lastReset:r,history:l};return k("app-usage",o),{usage:o}}),incrementSession:()=>t(s=>{const r={...s.usage,totalSessions:s.usage.totalSessions+1};return k("app-usage",r),{usage:r}}),saveAllSettings:async()=>{const{config:s,todos:r,leads:n,generatedImages:l,usage:o,catalog:d,systemInstruction:u}=i();await k("app-config",s),await k("app-todos",r),await k("app-leads",n),await k("app-gallery",l),await k("app-usage",o),await k("app-catalog",d),await k("app-system-prompt",u)},syncData:async()=>{t({isSyncing:!0}),await new Promise(s=>setTimeout(s,1500)),await i().saveAllSettings(),t({isSyncing:!1}),i().addLog({type:"info",message:"Synchronisation Cloud T.T.A réussie."})},updateProduct:(s,r)=>t(n=>{const l=n.catalog.map(o=>o.id===s?{...o,...r}:o);return k("app-catalog",l),{catalog:l}}),updateProductStock:(s,r)=>t(n=>{const l=n.catalog.map(o=>o.id===s?{...o,stock:r}:o);return k("app-catalog",l),{catalog:l}}),addProduct:s=>t(r=>{const l=[{...s,id:Math.random().toString(36).substr(2,9)},...r.catalog];return k("app-catalog",l),{catalog:l}}),removeProduct:s=>t(r=>{const n=r.catalog.filter(l=>l.id!==s);return k("app-catalog",n),{catalog:n}}),updateSystemInstruction:s=>t(r=>(k("app-system-prompt",s),{systemInstruction:s})),resetConfig:async()=>{t({config:de}),await k("app-config",de)},setVideo:async(s,r)=>{const{videoUrls:n}=i();if(n[s]&&n[s].startsWith("blob:")&&URL.revokeObjectURL(n[s]),!r){t(o=>({videoUrls:{...o.videoUrls,[s]:null}})),await k(`video-${s}`,null);return}const l=URL.createObjectURL(r);t(o=>({videoUrls:{...o.videoUrls,[s]:l}})),await k(`video-${s}`,r)},toggleConfig:()=>t(s=>({showConfig:!s.showConfig})),addLog:s=>t(r=>({logs:[{...s,timestamp:new Date().toISOString()},...r.logs].slice(0,100)})),clearLogs:()=>t({logs:[]}),addLead:s=>{const r={...s,id:Math.random().toString(36).substr(2,9),timestamp:new Date().toISOString(),priority:s.priority||"normal",processed:!1};t(n=>({leads:[r,...n.leads]})),i().saveAllSettings()},markLeadAsProcessed:s=>t(r=>{const n=r.leads.map(l=>l.id===s?{...l,processed:!0}:l);return k("app-leads",n),{leads:n}}),removeLead:s=>t(r=>{const n=r.leads.filter(l=>l.id!==s);return k("app-leads",n),{leads:n}}),exportLeads:()=>{const{leads:s}=i(),r="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(s,null,2)),n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download",`tta_leads_${new Date().toISOString().split("T")[0]}.json`),document.body.appendChild(n),n.click(),n.remove(),i().addLog({type:"info",message:"Export des leads commerciaux réussi."})},addGeneratedImage:s=>{const r={...s,id:Math.random().toString(36).substr(2,9),timestamp:new Date().toISOString()};t(n=>({generatedImages:[r,...n.generatedImages]})),i().saveAllSettings()},removeGeneratedImage:s=>t(r=>{const n=r.generatedImages.filter(l=>l.id!==s);return k("app-gallery",n),{generatedImages:n}}),addTodo:(s,r="medium")=>{const n={id:Math.random().toString(36).substr(2,9),text:s,completed:!1,priority:r,timestamp:new Date().toISOString()};t(l=>({todos:[n,...l.todos]})),i().saveAllSettings()},toggleTodo:s=>{t(r=>({todos:r.todos.map(n=>n.id===s?{...n,completed:!n.completed}:n)})),k("app-todos",i().todos)},removeTodo:s=>{t(r=>({todos:r.todos.filter(n=>n.id!==s)})),k("app-todos",i().todos)},clearTodos:()=>{t({todos:[]}),k("app-todos",[])},clearData:async()=>{await Dt(),t({config:de,usage:Le,videoUrls:Ke,logs:[],leads:[],todos:[],generatedImages:[],catalog:Fe,systemInstruction:Be}),window.location.reload()},setLiveState:(s,r=!1)=>t({isLive:s,isConnecting:r}),setAudioLevel:s=>t({audioLevel:s}),setPermissions:s=>t({hasPermissions:s}),triggerReportToast:()=>{t({showReportToast:!0}),setTimeout(()=>t({showReportToast:!1}),5e3)},setGroundingChunks:s=>t({groundingChunks:s}),setAudioAnalyser:s=>t({audioAnalyser:s}),setTranscription:(s,r)=>t(n=>({transcription:{...n.transcription,[s]:r}})),clearTranscription:()=>t({transcription:{user:"",ai:""},groundingChunks:[]}),loadStoredData:async()=>{const s=await K("app-config");s&&t({config:{...de,...s}});const r=await K("app-todos");r&&t({todos:r});const n=await K("app-leads");n&&t({leads:n});const l=await K("app-gallery");l&&t({generatedImages:l});const o=await K("app-usage");o&&t({usage:{...Le,...o}});const d=await K("app-catalog");d&&t({catalog:d});const u=await K("app-system-prompt");u&&t({systemInstruction:u});const x=["intro","idle","talking","talkingx"],m={...i().videoUrls};for(const c of x)try{const p=await K(`video-${c}`);p instanceof Blob&&(m[c]=URL.createObjectURL(p))}catch(p){console.error(`Error loading video ${c}:`,p)}t({videoUrls:m})}}));const qt=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ot=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,s,r)=>r?r.toUpperCase():s.toLowerCase()),We=t=>{const i=Ot(t);return i.charAt(0).toUpperCase()+i.slice(1)},dt=(...t)=>t.filter((i,s,r)=>!!i&&i.trim()!==""&&r.indexOf(i)===s).join(" ").trim(),Vt=t=>{for(const i in t)if(i.startsWith("aria-")||i==="role"||i==="title")return!0};var $t={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Gt=f.forwardRef(({color:t="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:n="",children:l,iconNode:o,...d},u)=>f.createElement("svg",{ref:u,...$t,width:i,height:i,stroke:t,strokeWidth:r?Number(s)*24/Number(i):s,className:dt("lucide",n),...!l&&!Vt(d)&&{"aria-hidden":"true"},...d},[...o.map(([x,m])=>f.createElement(x,m)),...Array.isArray(l)?l:[l]]));const h=(t,i)=>{const s=f.forwardRef(({className:r,...n},l)=>f.createElement(Gt,{ref:l,iconNode:i,className:dt(`lucide-${qt(We(t))}`,`lucide-${t}`,r),...n}));return s.displayName=We(t),s};const Ut=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ge=h("activity",Ut);const Ft=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Bt=h("bell",Ft);const Kt=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],Wt=h("brain-circuit",Kt);const Ht=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Xt=h("chart-column",Ht);const Yt=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],be=h("check",Yt);const Jt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Zt=h("circle-alert",Jt);const Qt=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],es=h("circle-check-big",Qt);const ts=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],ss=h("cloud",ts);const as=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],rs=h("coffee",as);const ns=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],is=h("download",ns);const os=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],ls=h("file-braces",os);const cs=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]],He=h("file-play",cs);const ds=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],us=h("globe",ds);const ps=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ut=h("info",ps);const xs=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],hs=h("layout-grid",xs);const ms=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],Ie=h("list-checks",ms);const gs=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],bs=h("loader-circle",gs);const fs=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ws=h("lock",fs);const ys=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],vs=h("mail",ys);const js=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Ns=h("message-circle",js);const ks=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M7 11h10",key:"1twpyw"}],["path",{d:"M7 15h6",key:"d9of3u"}],["path",{d:"M7 7h8",key:"af5zfr"}]],Xe=h("message-square-text",ks);const Ss=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Cs=h("mic",Ss);const Ms=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Ts=h("moon",Ms);const As=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Ye=h("package",As);const Ls=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Je=h("palette",Ls);const Is=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],_s=h("pen-line",Is);const zs=[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]],Rs=h("phone-off",zs);const Es=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],pt=h("phone",Es);const Ps=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Ds=h("play",Ps);const qs=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ze=h("plus",qs);const Os=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Vs=h("refresh-cw",Os);const $s=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Gs=h("search",$s);const Us=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Fs=h("settings-2",Us);const Bs=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],Ks=h("shield-alert",Bs);const Ws=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],fe=h("shield-check",Ws);const Hs=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Xs=h("shopping-bag",Hs);const Ys=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],Js=h("sliders-vertical",Ys);const Zs=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Qe=h("sparkles",Zs);const Qs=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],et=h("terminal",Qs);const ea=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ie=h("trash-2",ea);const ta=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],sa=h("trash",ta);const aa=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ra=h("trending-up",aa);const na=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ia=h("upload",na);const oa=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],tt=h("user-plus",oa);const la=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],ca=h("video",la);const da=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],st=h("volume-2",da);const ua=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_e=h("x",ua);const pa=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],xa=h("zap",pa);function ha(t){let i="";const s=t.byteLength;for(let r=0;r<s;r++)i+=String.fromCharCode(t[r]);return btoa(i)}function ma(t){const i=atob(t),s=i.length,r=new Uint8Array(s);for(let n=0;n<s;n++)r[n]=i.charCodeAt(n);return r}async function ga(t,i,s,r){const n=new Int16Array(t.buffer),l=n.length/r,o=i.createBuffer(r,l,s);for(let d=0;d<r;d++){const u=o.getChannelData(d);for(let x=0;x<l;x++)u[x]=n[x*r+d]/32768}return o}let Z=null,$=null,O=null,J=null,U=null,W=null,oe=null,ue=0;const Y=new Set,ba={name:"checkInventory",parameters:{type:_.OBJECT,description:"Vérifie la disponibilité en stock d'une machine dans la base T.T.A.",properties:{productName:{type:_.STRING,description:"Le nom de la machine ou la marque."}},required:["productName"]}},fa={name:"generateMarketingPoster",parameters:{type:_.OBJECT,description:"Génère un visuel publicitaire haute qualité pour une machine.",properties:{prompt:{type:_.STRING,description:"Le sujet du poster marketing."}},required:["prompt"]}},wa={name:"sendSalesLeadReport",parameters:{type:_.OBJECT,description:"Enregistre un nouveau prospect (lead) dans le registre commercial.",properties:{customerName:{type:_.STRING},customerPhone:{type:_.STRING,description:"Le numéro de téléphone du client."},interestedProducts:{type:_.STRING},summary:{type:_.STRING},urgency:{type:_.STRING,enum:["normal","urgent"]}},required:["customerName","interestedProducts","summary"]}},ya={name:"manageTodoList",parameters:{type:_.OBJECT,description:"Ajoute ou modifie des tâches dans la liste administrative.",properties:{action:{type:_.STRING,enum:["add","list","complete","delete"]},taskText:{type:_.STRING},taskId:{type:_.STRING}},required:["action"]}};async function va(t){const i=G.getState(),s=new lt({apiKey:"AIzaSyBGxQZEvtUjm5RXC0ozc9yPkCwBs4kD76U"});i.setMode("THINKING"),i.incrementRequest();try{const r=await s.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:`Professional commercial photography of ${t} for T.T.A Distribution Tunis, high-end Italian style, 4k resolution.`}]}});for(const n of r.candidates[0].content.parts)if(n.inlineData)return i.addGeneratedImage({url:`data:${n.inlineData.mimeType};base64,${n.inlineData.data}`,prompt:t}),i.addLog({type:"ai",message:`Studio : Poster généré avec succès pour "${t}"`}),!0}catch(r){console.error("Image Gen Error:",r),i.addLog({type:"error",message:"Échec de génération d'image marketing via AI."})}return!1}function ja(t){let i=0;for(let s=0;s<t.length;s++)i+=t[s]*t[s];return Math.min(Math.sqrt(i/t.length)*10,1)}function Na(){const t=()=>{const s=G.getState().currentMode==="TALKING"?U:W;if(s){const r=new Float32Array(s.frequencyBinCount);s.getFloatTimeDomainData(r),G.getState().setAudioLevel(ja(r))}Z&&requestAnimationFrame(t)};t()}async function at(){const t=G.getState();if(!(t.isLive||t.isConnecting)){if(t.config.isMaintenanceMode){t.addLog({type:"info",message:"Système bloqué : Mode Maintenance Manager actif."});return}t.setLiveState(!1,!0),t.incrementSession();try{const i=new lt({apiKey:"AIzaSyBGxQZEvtUjm5RXC0ozc9yPkCwBs4kD76U"});O=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3}),U=O.createAnalyser(),U.fftSize=256,U.connect(O.destination),$=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3}),W=$.createAnalyser();try{oe=await navigator.mediaDevices.getUserMedia({audio:!0})}catch(r){throw r.name==="NotAllowedError"&&(t.addLog({type:"error",message:"Microphone refusé. Si intégré via iframe, vérifiez l'attribut allow='microphone'."}),console.error("Microphone denied. Ensure <iframe allow='microphone; ...'> is used in parent site.")),r}$.createMediaStreamSource(oe).connect(W),t.setAudioAnalyser(W),Na(),Z=i.live.connect({model:"gemini-2.5-flash-native-audio-preview-12-2025",callbacks:{onopen:async()=>{t.setLiveState(!0,!1),t.setMode("IDLE"),!(!$||!oe)&&(J=$.createScriptProcessor(4096,1,1),J.onaudioprocess=r=>{const n=r.inputBuffer.getChannelData(0),l=new Int16Array(n.length);for(let o=0;o<n.length;o++)l[o]=n[o]*32768;Z?.then(o=>o.sendRealtimeInput({media:{data:ha(new Uint8Array(l.buffer)),mimeType:"audio/pcm;rate=16000"}}))},W?.connect(J),J.connect($.destination),t.addLog({type:"info",message:"Canal Live API Abdelmajid ouvert."}))},onmessage:async r=>{if(r.serverContent?.modelTurn&&t.incrementRequest(),r.toolCall){t.setMode("THINKING");for(const o of r.toolCall.functionCalls){let d="OK.";if(o.name==="checkInventory"){const{productName:u}=o.args,x=t.catalog.find(m=>m.name.toLowerCase().includes(u.toLowerCase())||m.brand.toLowerCase().includes(u.toLowerCase()));d=x?`Le stock pour ${x.name} est de ${x.stock} unités au prix de ${x.price}.`:"Produit non trouvé en base T.T.A.",t.addLog({type:"info",message:`Outil Inventaire : Consultation pour ${u}`})}else if(o.name==="generateMarketingPoster")d=await va(o.args.prompt)?"Poster marketing généré dans le studio.":"Echec technique de la génération.";else if(o.name==="sendSalesLeadReport"){const u=o.args;t.addLead({customerName:u.customerName,customerPhone:u.customerPhone,interestedProducts:u.interestedProducts,summary:u.summary,priority:u.urgency||"normal"}),t.triggerReportToast(),t.addLog({type:"ai",message:`Outil Ventes : Lead capturé (${u.customerName})`})}else if(o.name==="manageTodoList"){const{action:u,taskText:x,taskId:m}=o.args;if(u==="add")t.addTodo(x,"medium"),d="Action ajoutée à la liste du manager.";else if(u==="list")d=`Vous avez ${t.todos.filter(c=>!c.completed).length} tâches en attente.`;else if(u==="complete"){const c=t.todos.find(p=>p.text.includes(x)||p.id===m);c&&t.toggleTodo(c.id),d="Tâche mise à jour."}t.addLog({type:"info",message:"Outil Tâche : Modification du registre des actions."})}Z?.then(u=>u.sendToolResponse({functionResponses:{id:o.id,name:o.name,response:{result:d}}})),t.setMode("IDLE")}}r.serverContent?.groundingMetadata?.groundingChunks&&t.setGroundingChunks(r.serverContent.groundingMetadata.groundingChunks);const n=r.serverContent?.modelTurn?.parts?.[0]?.inlineData?.data;if(n&&O&&U){t.setMode("TALKING"),ue=Math.max(ue,O.currentTime);const o=await ga(ma(n),O,24e3,1),d=O.createBufferSource();d.buffer=o,d.connect(U),d.addEventListener("ended",()=>{Y.delete(d),Y.size===0&&t.setMode("IDLE")}),d.start(ue),ue+=o.duration,Y.add(d)}if(r.serverContent?.interrupted){for(const o of Y.values()){try{o.stop()}catch{}Y.delete(o)}ue=0,t.setMode("IDLE")}r.serverContent?.inputTranscription&&t.setTranscription("user",r.serverContent.inputTranscription.text),r.serverContent?.outputTranscription&&t.setTranscription("ai",r.serverContent.outputTranscription.text)},onerror:r=>{console.error("Live Session Error:",r);const n=r?.message||"";n.includes("implemented")||n.includes("supported")||n.includes("enabled")?t.addLog({type:"error",message:"API Live non supportée par cette clé. Utilisez une clé API payante."}):t.addLog({type:"error",message:"Erreur critique de la session Live API."}),we()},onclose:()=>{t.addLog({type:"info",message:"Session terminée."}),we()}},config:{responseModalities:[wt.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:t.config.selectedVoice}}},systemInstruction:t.systemInstruction,tools:[{functionDeclarations:[ba,wa,ya,fa]}]}})}catch(i){console.error("Critical Start Error:",i),t.setLiveState(!1,!1)}}}function we(){const t=G.getState();if(J){try{J.disconnect()}catch{}J=null}if(oe){try{oe.getTracks().forEach(i=>i.stop())}catch{}oe=null}if(U){try{U.disconnect()}catch{}U=null}if(W){try{W.disconnect()}catch{}W=null}$&&$.state!=="closed"&&$.close().catch(()=>{}),$=null,O&&O.state!=="closed"&&O.close().catch(()=>{}),O=null,Y.forEach(i=>{try{i.stop()}catch{}}),Y.clear(),Z&&(Z.then(i=>{try{i.close()}catch{}}).catch(()=>{}),Z=null),t.setLiveState(!1,!1),t.setMode("IDLE"),t.setAudioLevel(0)}const ka=()=>{const{currentMode:t,setMode:i,videoUrls:s,config:r,updateConfig:n,audioLevel:l,isLive:o,isConnecting:d,audioAnalyser:u,toggleConfig:x,hasPermissions:m,isTransparent:c}=G(),[p,S]=f.useState(0),[y,b]=f.useState(!1),v=f.useRef(null),z=t==="TALKING",T=t==="THINKING",R=t==="INTRO",E={INTRO:f.useRef(null),IDLE:f.useRef(null),TALKING:f.useRef(null),TALKING2:f.useRef(null)},Q=()=>{o||d||R?(we(),i("IDLE")):s.intro?i("INTRO"):(i("IDLE"),at())},C=async g=>{try{await g.play(),b(!1)}catch(j){console.warn("Autoplay blocked, showing fallback:",j),b(!0)}};f.useEffect(()=>{let g=t==="INTRO"?"INTRO":"IDLE";t==="TALKING"&&(g=p===0?"TALKING":"TALKING2");const j=E[g];j.current&&C(j.current)},[t,p]),f.useEffect(()=>{if(!v.current||!u||!o){const V=v.current?.getContext("2d");V&&V.clearRect(0,0,v.current.width,v.current.height);return}const g=v.current,j=g.getContext("2d");if(!j)return;const se=u.frequencyBinCount,M=new Uint8Array(se);let P;const B=()=>{P=requestAnimationFrame(B),u.getByteFrequencyData(M),j.clearRect(0,0,g.width,g.height);const V=g.width/2,ae=g.height/2,H=(r.baseSize/2-5)*r.scale;if(T){j.lineWidth=2*r.scale;const L=Date.now()*.002;for(let D=0;D<3;D++)j.beginPath(),j.arc(V,ae,H+15+D*15,L+D,L+D+Math.PI*1.5),j.strokeStyle=`rgba(234, 179, 8, ${.3-D*.1})`,j.stroke()}const le=120;for(let L=0;L<le;L++){const D=Math.PI*2/le,re=Math.floor(L*(se/le)*.5),ne=M[re]/255*85*(z?1.8:.4)*r.scale,I=V+Math.cos(D*L)*H,ce=ae+Math.sin(D*L)*H,q=V+Math.cos(D*L)*(H+ne),X=ae+Math.sin(D*L)*(H+ne);j.beginPath(),j.strokeStyle=T?"rgba(234, 179, 8, 0.5)":z?"rgba(255, 255, 255, 0.8)":"rgba(255, 255, 255, 0.2)",j.lineWidth=3*r.scale,j.lineCap="round",j.moveTo(I,ce),j.lineTo(q,X),j.stroke()}};return B(),()=>cancelAnimationFrame(P)},[u,o,z,T,l,r.scale,r.baseSize]);const A=(g,j,se)=>{const M=g==="TALKING"?"talking":g==="TALKING2"?"talkingx":g.toLowerCase(),P=s[M],B=g==="TALKING"||g==="TALKING2";return e.jsx("div",{className:`absolute inset-0 transition-opacity duration-700 ${se?"opacity-100 z-10":"opacity-0 z-0"}`,children:P?e.jsx("video",{ref:j,src:P,className:"w-full h-full object-cover scale-[1.05]",poster:"/poster.png",muted:g!=="INTRO",loop:g==="IDLE"||g==="TALKING"&&!s.talkingx||g==="TALKING2"&&!s.talking,playsInline:!0,preload:"metadata",onEnded:()=>{g==="INTRO"?at():B&&s.talking&&s.talkingx&&S(V=>1-V)}},P):e.jsxs("div",{className:"w-full h-full bg-zinc-900 flex flex-col items-center justify-center text-white p-6 text-center",children:[e.jsx(ca,{className:"w-10 h-10 opacity-20 mb-2"}),e.jsxs("span",{className:"text-[8px] font-black uppercase tracking-widest",children:[g," Manquant"]})]})})},ee=()=>d?"bg-blue-600 shadow-[0_0_30px_rgba(37,99,235,0.4)]":T?"bg-amber-500 shadow-[0_0_30px_rgba(245,158,11,0.4)]":o||R?"bg-red-600 hover:bg-red-500 shadow-[0_0_40px_rgba(220,38,38,0.5)]":"bg-emerald-600 hover:bg-emerald-500 shadow-[0_0_30px_rgba(16,185,129,0.4)]",ve=()=>d?e.jsx(bs,{className:"w-10 h-10 animate-spin text-white"}):T?e.jsx(Wt,{className:"w-10 h-10 text-white animate-pulse"}):o||R?e.jsx(Rs,{className:"w-8 h-8 text-white"}):e.jsx(pt,{className:"w-10 h-10 text-white"}),te=r.baseSize*r.scale,je=()=>{const g=E[t==="INTRO"?"INTRO":"IDLE"];g.current&&g.current.play().then(()=>b(!1))};return e.jsxs(N.div,{drag:!0,dragMomentum:!1,onDragEnd:(g,j)=>n({posX:r.posX+j.offset.x,posY:r.posY+j.offset.y}),style:{x:r.posX,y:r.posY},className:"relative z-[9999] p-4 md:p-20 cursor-grab active:cursor-grabbing flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none z-0",children:e.jsx("canvas",{ref:v,width:800,height:800,className:"w-full h-full"})}),e.jsx(N.div,{animate:{scale:(1.2+l)*r.scale,opacity:T?.4:.2},style:{width:te,height:te},className:`absolute rounded-full blur-[140px] pointer-events-none transition-colors duration-500 left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 ${T?"bg-amber-500":o?"bg-red-500":"bg-emerald-500"}`}),e.jsxs("div",{style:{width:`${te}px`,height:`${te}px`},className:`relative rounded-full border-4 border-white/10 overflow-visible z-10 group ${c?"bg-transparent shadow-none":"bg-zinc-950 shadow-[0_40px_100px_rgba(0,0,0,1)]"}`,children:[y&&e.jsx("div",{className:"absolute inset-0 z-[80] flex items-center justify-center bg-black/60 rounded-full backdrop-blur-sm cursor-pointer",onClick:je,children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Ds,{className:"w-12 h-12 text-white/90"}),e.jsx("span",{className:"text-[10px] uppercase font-bold text-white/80 tracking-widest",children:"Activer l'avatar"})]})}),e.jsxs("div",{className:"absolute -bottom-14 left-1/2 -translate-x-1/2 z-[70] pointer-events-auto flex flex-col items-center gap-3 w-max",children:[e.jsxs(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex items-center gap-2 backdrop-blur-3xl px-4 py-2 rounded-2xl border shadow-2xl transition-all duration-500 ${o?"bg-red-600/30 border-red-500/40":"bg-emerald-600/30 border-emerald-500/40 shadow-black/40"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-2 h-2 rounded-full transition-colors duration-500 ${o?"bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.8)]":"bg-emerald-400 shadow-[0_0_8px_rgba(52,211,153,0.6)]"}`}),o&&e.jsx("div",{className:"absolute inset-0 bg-red-500 rounded-full animate-ping opacity-40"})]}),e.jsx("span",{className:`text-[9px] font-black uppercase tracking-[0.2em] whitespace-nowrap transition-colors duration-500 ${o?"text-red-100":"text-emerald-100"}`,children:o?"Abdelmajid En Ligne":r.isMaintenanceMode?"Maintenance":"Prêt pour appel"})]}),e.jsx("button",{onClick:g=>{g.stopPropagation(),Q()},disabled:!m,className:`w-24 h-24 rounded-[3rem] flex items-center justify-center transition-all duration-300 shadow-[0_20px_50px_rgba(0,0,0,0.5)] ${ee()} active:scale-90 border-4 border-white/10`,title:o?"Raccrocher":"Appeler Abdelmajid",children:ve()})]}),e.jsxs("div",{className:`w-full h-full relative rounded-full overflow-hidden ${c?"bg-transparent":"bg-black"}`,style:{maskImage:"radial-gradient(circle at center, black 61%, transparent 68%)",WebkitMaskImage:"radial-gradient(circle at center, black 61%, transparent 68%)"},children:[A("INTRO",E.INTRO,R),A("IDLE",E.IDLE,(t==="IDLE"||T||d)&&!z&&!R),A("TALKING",E.TALKING,z&&p===0),A("TALKING2",E.TALKING2,z&&p===1)]})]})]})},Sa=()=>{const{showConfig:t,toggleConfig:i,usage:s,leads:r,logs:n,catalog:l,generatedImages:o,updateProductStock:d,updateProduct:u,addProduct:x,removeProduct:m,syncData:c,isSyncing:p,setVideo:S,videoUrls:y,markLeadAsProcessed:b,removeLead:v,exportLeads:z,todos:T,addTodo:R,toggleTodo:E,removeTodo:Q,config:C,updateConfig:A,clearLogs:ee,removeGeneratedImage:ve,systemInstruction:te,updateSystemInstruction:je,transcription:g,loadStoredData:j,isTransparent:se}=G(),[M,P]=f.useState("dashboard"),[B,V]=f.useState("all"),[ae,H]=f.useState(""),[le,L]=f.useState(null),[D,re]=f.useState(!1),[pe,ne]=f.useState(""),[I,ce]=f.useState(null),[q,X]=f.useState({name:"",brand:"",category:"Café",description:"",specs:[],stock:0,price:"Sur devis"}),xe=f.useRef(null);f.useEffect(()=>{xe.current&&M==="logs"&&(xe.current.scrollTop=xe.current.scrollHeight)},[n,M]);const ht=r.filter(a=>a.priority==="urgent"&&!a.processed).length,Re=T.filter(a=>!a.completed).length,Ne=s.requestsToday/1500*100,ke=Ne>90,Ee=n.filter(a=>{const w=B==="all"||a.type===B,he=a.message.toLowerCase().includes(ae.toLowerCase());return w&&he}),mt=async(a,w)=>{const he=w.target.files?.[0];he&&await S(a,he)},gt=a=>{const w=document.createElement("a");w.href=a.url,w.download=`tta_marketing_${a.id}.png`,w.click()},bt=()=>{!q.name||!q.brand||(x(q),re(!1),X({name:"",brand:"",category:"Café",description:"",specs:[],stock:0,price:"Sur devis"}))};return e.jsx(F,{children:t&&e.jsxs("div",{className:`fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-8 ${se?"bg-transparent":"bg-black/95 backdrop-blur-2xl"}`,children:[e.jsxs(N.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"bg-[#080809] w-full max-w-7xl h-full max-h-[92vh] rounded-[3.5rem] overflow-hidden flex flex-col border border-white/5 shadow-2xl relative",children:[e.jsxs("div",{className:"px-10 py-8 border-b border-white/5 flex items-center justify-between bg-black/40 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-600 to-blue-800 rounded-2xl flex items-center justify-center shadow-xl shadow-blue-900/20",children:e.jsx(ra,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-white tracking-tighter uppercase leading-tight",children:"T.T.A Control Tower"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ss,{className:`w-3 h-3 ${p?"text-blue-400 animate-pulse":"text-emerald-500"}`}),e.jsx("span",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest italic",children:p?"Sync Cloud en cours...":"Manager Bridge Connecté"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"hidden lg:flex items-center gap-4 bg-white/5 px-6 py-3 rounded-2xl border border-white/5 mr-4",children:[e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-[8px] font-black text-zinc-500 uppercase tracking-widest leading-tight",children:"Gemini API Load"}),e.jsxs("span",{className:`text-[10px] font-black font-mono leading-tight ${ke?"text-red-500":"text-white"}`,children:[Ne.toFixed(1),"%"]})]}),ke?e.jsx(Ks,{className:"w-4 h-4 text-red-500 animate-pulse"}):e.jsx(fe,{className:"w-4 h-4 text-emerald-500"})]}),e.jsxs("button",{onClick:c,disabled:p,className:"hidden sm:flex items-center gap-2 px-6 py-3 bg-white/5 hover:bg-white/10 rounded-xl text-[10px] font-black uppercase tracking-widest text-zinc-300 border border-white/5 transition-all active:scale-95",children:[e.jsx(Vs,{className:`w-3 h-3 ${p?"animate-spin":""}`}),p?"Sauvegarde...":"Sync Cloud"]}),e.jsx("button",{onClick:i,className:"w-12 h-12 bg-white/5 hover:bg-white/10 rounded-full flex items-center justify-center transition-all group active:scale-90",children:e.jsx(_e,{className:"w-6 h-6 text-zinc-400 group-hover:text-white"})})]})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("div",{className:"w-24 sm:w-64 border-r border-white/5 bg-black/20 flex flex-col py-8 overflow-y-auto shrink-0",children:[{id:"dashboard",icon:hs,label:"Vision 360"},{id:"leads",icon:tt,label:"Leads Clients",badge:ht},{id:"todos",icon:Ie,label:"Notes & Tâches",badge:Re},{id:"catalog",icon:Ye,label:"Stock Pro"},{id:"studio",icon:Je,label:"Marketing"},{id:"videos",icon:He,label:"Avatar AI"},{id:"logs",icon:et,label:"Live Console"},{id:"usage",icon:ge,label:"Statistiques"},{id:"settings",icon:Fs,label:"Système"}].map(a=>e.jsxs("button",{onClick:()=>P(a.id),className:`flex items-center gap-4 px-8 py-5 transition-all relative group ${M===a.id?"text-blue-500 bg-blue-500/5 border-r-2 border-blue-500":"text-zinc-500 hover:text-white"}`,children:[e.jsx(a.icon,{className:`w-5 h-5 transition-transform ${M===a.id?"scale-110":"group-hover:scale-110"}`}),e.jsx("span",{className:"hidden sm:inline text-sm font-bold tracking-tight",children:a.label}),a.badge?e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 bg-red-600 rounded-full flex items-center justify-center text-[10px] font-black text-white shadow-lg shadow-red-900/40",children:a.badge}):null]},a.id))}),e.jsx("div",{className:"flex-1 overflow-y-auto p-10 bg-[#080809] custom-scrollbar relative",children:e.jsxs(F,{mode:"wait",children:[M==="dashboard"&&e.jsxs(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-10",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white/5 p-8 rounded-[2.5rem] border border-white/5 hover:bg-white/[0.07] transition-all cursor-pointer group shadow-xl",onClick:()=>P("leads"),children:[e.jsx(tt,{className:"w-6 h-6 text-blue-500 mb-4 group-hover:scale-110 transition-transform"}),e.jsx("h4",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest",children:"Prospectus"}),e.jsx("p",{className:"text-4xl font-black text-white mt-1",children:r.filter(a=>!a.processed).length})]}),e.jsxs("div",{className:"bg-white/5 p-8 rounded-[2.5rem] border border-white/5 hover:bg-white/[0.07] transition-all cursor-pointer group shadow-xl",onClick:()=>P("todos"),children:[e.jsx(Ie,{className:"w-6 h-6 text-emerald-500 mb-4 group-hover:scale-110 transition-transform"}),e.jsx("h4",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest",children:"Tâches"}),e.jsx("p",{className:"text-4xl font-black text-white mt-1",children:Re})]}),e.jsxs("div",{className:"bg-white/5 p-8 rounded-[2.5rem] border border-white/5 hover:bg-white/[0.07] transition-all cursor-pointer group shadow-xl",onClick:()=>P("usage"),children:[e.jsx(ge,{className:"w-6 h-6 text-violet-500 mb-4 group-hover:scale-110 transition-transform"}),e.jsx("h4",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest",children:"Sessions"}),e.jsx("p",{className:"text-4xl font-black text-white mt-1",children:s.totalSessions})]}),e.jsxs("div",{className:"bg-white/5 p-8 rounded-[2.5rem] border border-white/5 hover:bg-white/[0.07] transition-all cursor-pointer group shadow-xl",onClick:()=>P("catalog"),children:[e.jsx(Ye,{className:"w-6 h-6 text-amber-500 mb-4 group-hover:scale-110 transition-transform"}),e.jsx("h4",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest",children:"Catalogue"}),e.jsx("p",{className:"text-4xl font-black text-white mt-1",children:l.length})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white/5 p-10 rounded-[3rem] border border-white/5 relative overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-black text-white uppercase tracking-tight",children:"Transcription Live"}),e.jsx("p",{className:"text-xs text-zinc-500 font-bold uppercase tracking-widest mt-1",children:"Flux de conversation en temps réel"})]}),e.jsx("div",{className:"w-10 h-10 bg-blue-600/10 rounded-full flex items-center justify-center text-blue-500",children:e.jsx(Xe,{className:"w-5 h-5 animate-pulse"})})]}),e.jsx("div",{className:"space-y-6 h-64 overflow-y-auto custom-scrollbar-terminal pr-4",children:g.user||g.ai?e.jsxs(e.Fragment,{children:[g.user&&e.jsxs("div",{className:"bg-blue-600/10 p-5 rounded-2xl border border-blue-500/20 max-w-[80%]",children:[e.jsx("span",{className:"text-[8px] font-black text-blue-400 uppercase tracking-[0.2em] mb-2 block",children:"Client"}),e.jsxs("p",{className:"text-sm font-bold text-blue-100 leading-relaxed italic",children:['"',g.user,'"']})]}),g.ai&&e.jsxs("div",{className:"bg-zinc-800/40 p-5 rounded-2xl border border-white/5 max-w-[80%] ml-auto",children:[e.jsx("span",{className:"text-[8px] font-black text-zinc-500 uppercase tracking-[0.2em] mb-2 block",children:"Assistant Abdelmajid"}),e.jsxs("p",{className:"text-sm font-bold text-white leading-relaxed",children:['"',g.ai,'"']})]})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center opacity-10",children:[e.jsx(ge,{className:"w-12 h-12 mb-4"}),e.jsx("p",{className:"text-xs font-black uppercase tracking-widest",children:"Aucune activité vocale détectée"})]})})]}),e.jsxs("div",{className:"bg-white/5 p-10 rounded-[3rem] border border-white/5",children:[e.jsx("h4",{className:"text-xl font-black text-white uppercase tracking-tight mb-8",children:"Alertes Rapides"}),e.jsxs("div",{className:"space-y-4",children:[r.filter(a=>a.priority==="urgent"&&!a.processed).slice(0,3).map(a=>e.jsxs("div",{onClick:()=>{ce(a),P("leads")},className:"p-5 bg-red-600/10 border border-red-500/20 rounded-2xl cursor-pointer hover:bg-red-600/20 transition-all active:scale-95 shadow-lg",children:[e.jsx("h5",{className:"text-xs font-black text-red-500 uppercase mb-1",children:a.customerName}),e.jsx("p",{className:"text-[10px] text-zinc-400 font-bold line-clamp-1 italic",children:a.interestedProducts})]},a.id)),r.filter(a=>a.priority==="urgent"&&!a.processed).length===0&&e.jsx("div",{className:"text-center py-10 opacity-20",children:e.jsx(fe,{className:"w-10 h-10 mx-auto"})})]})]})]})]},"dashboard"),M==="leads"&&e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-tight",children:"Registre Commercial"}),e.jsxs("button",{onClick:z,className:"px-6 py-3 bg-white/5 hover:bg-white/10 rounded-2xl text-[10px] font-black uppercase text-zinc-300 border border-white/5 transition-all flex items-center gap-2 active:scale-95",children:[e.jsx(ls,{className:"w-4 h-4 text-blue-500"})," Exporter Registre"]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.map(a=>e.jsxs("div",{onClick:()=>ce(a),className:`p-8 rounded-[2.5rem] border flex items-center justify-between group transition-all cursor-pointer relative overflow-hidden ${a.processed?"opacity-40 grayscale bg-black/40 border-white/5":"bg-white/5 border-white/5 hover:border-blue-500/30"}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx("h4",{className:`text-xl font-black uppercase ${a.priority==="urgent"&&!a.processed?"text-red-500":"text-blue-500"}`,children:a.customerName}),e.jsxs("span",{className:"text-[8px] text-zinc-600 font-mono tracking-widest uppercase",children:[new Date(a.timestamp).toLocaleDateString()," ",new Date(a.timestamp).toLocaleTimeString()]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-xs font-bold text-zinc-400",children:a.interestedProducts}),a.priority==="urgent"&&!a.processed&&e.jsx("span",{className:"px-2 py-0.5 bg-red-600 rounded text-[8px] font-black text-white uppercase tracking-widest animate-pulse",children:"Urgent"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[!a.processed&&e.jsx("button",{onClick:w=>{w.stopPropagation(),b(a.id)},className:"p-3 bg-emerald-600/10 text-emerald-500 rounded-xl hover:bg-emerald-600 hover:text-white transition-all active:scale-90",children:e.jsx(be,{className:"w-4 h-4"})}),e.jsx("button",{onClick:w=>{w.stopPropagation(),v(a.id)},className:"p-3 bg-red-600/10 text-red-500 rounded-xl hover:bg-red-600 hover:text-white transition-all active:scale-90",children:e.jsx(sa,{className:"w-4 h-4"})})]})]},a.id))}),e.jsx(F,{children:I&&e.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[120] flex items-center justify-center p-6 bg-black/80 backdrop-blur-md",children:e.jsxs(N.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:"bg-[#111112] w-full max-w-2xl rounded-[3rem] border border-white/10 p-12 shadow-[0_50px_100px_rgba(0,0,0,0.9)] overflow-y-auto max-h-[90vh] custom-scrollbar",children:[e.jsxs("div",{className:"flex justify-between items-start mb-10",children:[e.jsxs("div",{children:[e.jsxs("span",{className:`text-[10px] font-black uppercase tracking-[0.3em] px-3 py-1 rounded-full mb-4 inline-block ${I.priority==="urgent"?"bg-red-600 text-white":"bg-blue-600 text-white"}`,children:["Lead ",I.priority]}),e.jsx("h3",{className:"text-4xl font-black text-white uppercase tracking-tight leading-tight",children:I.customerName})]}),e.jsx("button",{onClick:()=>ce(null),className:"p-3 bg-white/5 rounded-full text-zinc-500 hover:text-white transition-all active:scale-90",children:e.jsx(_e,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-10",children:[e.jsxs("div",{className:"bg-white/5 p-6 rounded-2xl border border-white/5",children:[e.jsx("label",{className:"text-[8px] font-black text-zinc-500 uppercase tracking-widest mb-2 block",children:"Contact Client"}),e.jsxs("p",{className:"text-xl font-bold text-white flex items-center gap-3",children:[e.jsx(pt,{className:"w-5 h-5 text-blue-500"})," ",I.customerPhone||"Non spécifié"]})]}),e.jsxs("div",{className:"bg-white/5 p-6 rounded-2xl border border-white/5",children:[e.jsx("label",{className:"text-[8px] font-black text-zinc-500 uppercase tracking-widest mb-2 block",children:"Intérêt Produit"}),e.jsxs("p",{className:"text-xl font-bold text-white flex items-center gap-3",children:[e.jsx(Xs,{className:"w-5 h-5 text-emerald-500"})," ",I.interestedProducts]})]})]}),e.jsx("div",{className:"space-y-8 mb-10",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] font-black text-zinc-500 uppercase tracking-widest mb-3 block italic",children:"Rapport de l'IA Abdelmajid"}),e.jsxs("div",{className:"bg-blue-600/5 border border-blue-500/20 p-8 rounded-[2rem] text-blue-100/80 leading-relaxed text-sm italic shadow-inner",children:['"',I.summary,'"']})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>{const a=encodeURIComponent(`Offre T.T.A - ${I.customerName}`),w=encodeURIComponent(`Bonjour ${I.customerName},

Suite à votre intérêt pour ${I.interestedProducts}, nous revenons vers vous...`);window.open(`mailto:ttadis@gnet.tn?subject=${a}&body=${w}`)},className:"flex-1 py-2.5 bg-blue-600 text-white font-black uppercase text-[10px] tracking-widest rounded-2xl flex items-center justify-center gap-3 shadow-xl shadow-blue-900/20 active:scale-95 transition-all",children:[e.jsx(vs,{className:"w-4 h-4"})," Envoyer Offre"]}),e.jsxs("button",{onClick:()=>{if(!I.customerPhone)return alert("Numéro de téléphone manquant");const a=I.customerPhone.replace(/\D/g,""),w=encodeURIComponent(`Bonjour ${I.customerName}, c'est l'équipe T.T.A Distribution.`);window.open(`https://wa.me/${a}?text=${w}`,"_blank")},className:"flex-1 py-2.5 bg-emerald-600 text-white font-black uppercase text-[10px] tracking-widest rounded-2xl flex items-center justify-center gap-3 shadow-xl shadow-emerald-900/20 active:scale-95 transition-all",children:[e.jsx(Ns,{className:"w-4 h-4"})," WhatsApp Direct"]})]})]})})})]},"leads"),M==="catalog"&&e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-8 pb-20",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-tight",children:"Stock Pro T.T.A"}),e.jsx("p",{className:"text-xs text-zinc-500 font-bold uppercase tracking-widest mt-1",children:"Gestion de l'inventaire en temps réel"})]}),e.jsxs("button",{onClick:()=>re(!0),className:"px-8 py-4 bg-blue-600 hover:bg-blue-700 text-white text-[10px] font-black uppercase rounded-2xl shadow-xl shadow-blue-900/20 flex items-center gap-3 transition-transform active:scale-95",children:[e.jsx(Ze,{className:"w-4 h-4"})," Nouveau Produit"]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:l.map(a=>e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-[3rem] p-10 flex flex-col md:flex-row items-center gap-10 group hover:bg-white/[0.08] transition-all relative",children:[e.jsx("div",{className:"w-28 h-28 bg-zinc-900 rounded-[2.5rem] flex items-center justify-center border border-white/5 shadow-inner",children:e.jsx(rs,{className:`w-12 h-12 ${a.stock===0?"text-zinc-800":"text-blue-500"} group-hover:scale-110 transition-transform`})}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-4 mb-2",children:[e.jsx("span",{className:"text-[10px] font-black text-blue-500 uppercase tracking-widest",children:a.brand}),e.jsx("div",{className:"w-1.5 h-1.5 bg-zinc-800 rounded-full"}),e.jsx("span",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest",children:a.category})]}),le===a.id?e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{autoFocus:!0,defaultValue:a.name,onBlur:w=>{u(a.id,{name:w.target.value}),L(null)},onKeyDown:w=>w.key==="Enter"&&(u(a.id,{name:w.target.value}),L(null)),className:"bg-black/60 border border-blue-500/50 rounded-xl px-4 py-2 text-2xl font-black text-white uppercase outline-none w-full"}),e.jsx("button",{onClick:()=>L(null),className:"p-2 text-emerald-500",children:e.jsx(be,{className:"w-6 h-6"})})]}):e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-3",children:[e.jsx("h4",{className:"text-2xl font-black text-white uppercase group-hover:text-blue-400 transition-colors cursor-pointer",onClick:()=>L(a.id),children:a.name}),e.jsx(_s,{className:"w-4 h-4 opacity-0 group-hover:opacity-30 transition-opacity"})]}),e.jsxs("p",{className:"text-zinc-500 text-sm mt-2 italic max-w-lg leading-relaxed line-clamp-2",children:['"',a.description,'"']})]}),e.jsxs("div",{className:"flex items-center gap-12 shrink-0 border-l border-white/5 pl-12 h-full",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-[10px] font-black text-zinc-600 uppercase block mb-3",children:"En Stock"}),e.jsxs("div",{className:"flex items-center gap-4 bg-black/40 rounded-2xl p-2 border border-white/5",children:[e.jsx("button",{onClick:()=>d(a.id,Math.max(0,a.stock-1)),className:"w-10 h-10 flex items-center justify-center text-zinc-500 hover:text-red-500 transition-all font-black text-xl active:scale-90",children:"-"}),e.jsx("span",{className:`text-2xl font-black w-12 text-center ${a.stock===0?"text-red-500":"text-white"}`,children:a.stock}),e.jsx("button",{onClick:()=>d(a.id,a.stock+1),className:"w-10 h-10 flex items-center justify-center text-zinc-500 hover:text-emerald-500 transition-all font-black text-xl active:scale-90",children:"+"})]})]}),e.jsxs("div",{className:"text-right w-40",children:[e.jsx("span",{className:"text-[10px] font-black text-zinc-600 uppercase block mb-2",children:"Prix Unitaire"}),e.jsx("input",{defaultValue:a.price,onBlur:w=>u(a.id,{price:w.target.value}),className:"bg-transparent border-none text-xl font-black text-blue-400 uppercase text-right outline-none w-full focus:text-white"})]}),e.jsx("button",{onClick:()=>m(a.id),className:"p-4 bg-white/5 rounded-2xl opacity-0 group-hover:opacity-100 text-zinc-600 hover:text-red-500 transition-all active:scale-90",children:e.jsx(ie,{className:"w-5 h-5"})})]})]},a.id))}),e.jsx(F,{children:D&&e.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[110] flex items-center justify-center p-6 bg-black/80 backdrop-blur-md",children:e.jsxs(N.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-[#0f0f10] w-full max-w-xl rounded-[3.5rem] border border-white/10 p-12 shadow-[0_40px_100px_rgba(0,0,0,0.8)]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-10",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-black text-white uppercase tracking-tight",children:"Nouveau Matériel"}),e.jsx("p",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest mt-1",children:"Expansion du catalogue expert"})]}),e.jsx("button",{onClick:()=>re(!1),className:"w-12 h-12 bg-white/5 rounded-full flex items-center justify-center text-zinc-500 hover:text-white transition-all",children:e.jsx(_e,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest mb-3 block",children:"Nom Complet"}),e.jsx("input",{value:q.name,onChange:a=>X({...q,name:a.target.value}),placeholder:"Astoria Storm Profiler...",className:"w-full bg-black/40 border border-white/5 rounded-2xl p-5 text-white outline-none focus:border-blue-500 transition-all font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest mb-3 block",children:"Marque"}),e.jsx("input",{value:q.brand,onChange:a=>X({...q,brand:a.target.value}),placeholder:"Astoria, La Cimbali...",className:"w-full bg-black/40 border border-white/5 rounded-2xl p-5 text-white outline-none focus:border-blue-500 font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest mb-3 block",children:"Catégorie"}),e.jsxs("select",{value:q.category,onChange:a=>X({...q,category:a.target.value}),className:"w-full bg-black/40 border border-white/5 rounded-2xl p-5 text-white outline-none focus:border-blue-500 cursor-pointer font-bold appearance-none",children:[e.jsx("option",{value:"Café",children:"Café"}),e.jsx("option",{value:"Glace",children:"Glace"}),e.jsx("option",{value:"Froid",children:"Froid"}),e.jsx("option",{value:"Vitrine",children:"Vitrine"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest mb-3 block",children:"Description Marketing"}),e.jsx("textarea",{value:q.description,onChange:a=>X({...q,description:a.target.value}),placeholder:"Description courte pour l'assistant...",className:"w-full bg-black/40 border border-white/5 rounded-2xl p-5 text-white h-32 outline-none focus:border-blue-500 resize-none font-medium leading-relaxed"})]}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsx("button",{onClick:()=>re(!1),className:"flex-1 py-5 bg-white/5 hover:bg-white/10 text-zinc-400 font-black uppercase text-[10px] rounded-2xl transition-all",children:"Annuler"}),e.jsxs("button",{onClick:bt,className:"flex-1 py-5 bg-blue-600 hover:bg-blue-700 text-white font-black uppercase text-[10px] rounded-2xl shadow-xl shadow-blue-900/40 transition-all flex items-center justify-center gap-3",children:[e.jsx(be,{className:"w-4 h-4"})," Finaliser l'Ajout"]})]})]})]})})})]},"catalog"),M==="studio"&&e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-10",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-tight",children:"Marketing Studio Pro"}),e.jsx("p",{className:"text-xs text-zinc-500 font-bold uppercase tracking-widest mt-1",children:"Visuels de campagne générés par l'IA"})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-white/5 px-6 py-3 rounded-2xl border border-white/5",children:[e.jsx(Qe,{className:"w-5 h-5 text-amber-500"}),e.jsxs("span",{className:"text-[10px] font-black text-white uppercase tracking-widest",children:[o.length," Actifs"]})]})]}),o.length===0?e.jsxs("div",{className:"h-96 flex flex-col items-center justify-center bg-white/5 rounded-[4rem] border border-white/5 text-zinc-600 gap-6",children:[e.jsx("div",{className:"w-24 h-24 bg-white/5 rounded-full flex items-center justify-center border border-white/5",children:e.jsx(Je,{className:"w-10 h-10 opacity-20"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-black uppercase tracking-[0.3em]",children:"Studio Vide"}),e.jsx("p",{className:"text-xs text-zinc-700 font-bold uppercase mt-2",children:"Demandez à Abdelmajid de générer des posters"})]})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10",children:o.map(a=>e.jsxs(N.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"group relative aspect-square bg-[#0c0c0d] rounded-[3.5rem] overflow-hidden border border-white/5 shadow-2xl",children:[e.jsx("img",{src:a.url,className:"w-full h-full object-cover transition-transform duration-1000 group-hover:scale-110",alt:a.prompt}),e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-10 flex flex-col justify-end",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/10 mb-6 shadow-xl",children:[e.jsxs("p",{className:"text-[10px] font-black text-blue-400 uppercase tracking-widest mb-2 flex items-center gap-2",children:[e.jsx(Qe,{className:"w-3 h-3"})," AI Content Engine"]}),e.jsxs("p",{className:"text-xs text-white font-bold italic line-clamp-3 leading-relaxed",children:['"',a.prompt,'"']})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>gt(a),className:"flex-1 py-4 bg-blue-600 hover:bg-blue-700 rounded-2xl text-white text-[10px] font-black uppercase flex items-center justify-center gap-3 transition-all shadow-lg active:scale-95",children:[e.jsx(is,{className:"w-4 h-4"})," Download"]}),e.jsx("button",{onClick:()=>ve(a.id),className:"p-4 bg-red-600/20 text-red-500 rounded-2xl hover:bg-red-600 hover:text-white transition-all active:scale-90",children:e.jsx(ie,{className:"w-5 h-5"})})]})]})]},a.id))})]},"studio"),M==="usage"&&e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white/5 p-12 rounded-[3.5rem] border border-white/5 flex flex-col gap-6 group hover:bg-white/[0.08] transition-all",children:[e.jsx(Xt,{className:"w-12 h-12 text-blue-500 group-hover:scale-110 transition-transform"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-[0.2em] mb-2",children:"Requêtes Gemini"}),e.jsx("span",{className:"text-5xl font-black text-white leading-none",children:s.requestsToday}),e.jsx("span",{className:"text-xs text-zinc-700 font-black tracking-widest ml-4 italic",children:"/ 1.5K Jour"})]})]}),e.jsxs("div",{className:"bg-white/5 p-12 rounded-[3.5rem] border border-white/5 flex flex-col gap-6 group hover:bg-white/[0.08] transition-all",children:[e.jsx(ge,{className:"w-12 h-12 text-emerald-500 group-hover:scale-110 transition-transform"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-[0.2em] mb-2",children:"Sessions Manager"}),e.jsx("span",{className:"text-5xl font-black text-white",children:s.totalSessions}),e.jsx("span",{className:"text-xs text-zinc-700 font-black tracking-widest ml-4 italic",children:"Actif"})]})]}),e.jsxs("div",{className:"bg-white/5 p-12 rounded-[3.5rem] border border-white/5 flex flex-col gap-6 group hover:bg-white/[0.08] transition-all",children:[e.jsx(fe,{className:"w-12 h-12 text-amber-500 group-hover:scale-110 transition-transform"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-[0.2em] mb-2",children:"Système Core"}),e.jsx("span",{className:"text-2xl font-black text-white uppercase italic",children:"Optimal"}),e.jsx("p",{className:"text-[8px] text-zinc-600 font-black uppercase mt-2",children:"v3.2.4 Final STABLE"})]})]})]}),e.jsxs("div",{className:"bg-white/5 p-12 rounded-[4rem] border border-white/5 relative overflow-hidden shadow-2xl",children:[e.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-blue-600/5 blur-[120px] rounded-full"}),e.jsxs("div",{className:"flex justify-between items-end mb-12",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-3xl font-black text-white uppercase tracking-tight",children:"Activité Historique"}),e.jsx("p",{className:"text-zinc-500 text-sm font-bold uppercase tracking-widest mt-2",children:"Volume de transactions AI"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:`text-6xl font-black font-mono leading-none ${ke?"text-red-500":"text-blue-500"}`,children:[Ne.toFixed(1),"%"]}),e.jsx("p",{className:"text-[10px] font-black text-zinc-600 uppercase mt-2",children:"Saturation Quota API"})]})]}),e.jsx("div",{className:"h-64 flex items-end gap-8 px-6",children:s.history.length===0?e.jsx("div",{className:"w-full h-full flex items-center justify-center border-t border-white/5 mt-10",children:e.jsx("p",{className:"text-zinc-700 italic text-sm uppercase tracking-widest font-black opacity-30",children:"Données en synchronisation..."})}):s.history.slice().reverse().map((a,w)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-4 group",children:[e.jsx(N.div,{initial:{height:0},animate:{height:`${Math.max(10,a.count/300*100)}%`},className:`w-full ${a.count>250?"bg-red-500/30 border-red-500":"bg-blue-600/20 border-blue-500"} border-t-4 rounded-t-2xl group-hover:bg-blue-600/40 transition-all relative shadow-xl`,children:e.jsxs("div",{className:"absolute -top-12 left-1/2 -translate-x-1/2 bg-zinc-800 text-white text-[10px] font-black px-3 py-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-all shadow-2xl border border-white/5",children:[a.count," calls"]})}),e.jsx("span",{className:"text-[10px] font-black text-zinc-600 uppercase tracking-widest",children:a.date.split("-").slice(1).join("/")})]},w))})]})]},"usage"),M==="logs"&&e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},className:"h-full flex flex-col gap-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600/10 rounded-2xl flex items-center justify-center text-blue-500 shadow-lg",children:e.jsx(et,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-tight",children:"Live Diagnostic Console"}),e.jsx("p",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest",children:"Flux d'événements Manager Bridge"})]})]}),e.jsx("div",{className:"flex-1 max-w-sm mx-10",children:e.jsxs("div",{className:"relative group",children:[e.jsx(Gs,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-600 group-focus-within:text-blue-500 transition-colors"}),e.jsx("input",{value:ae,onChange:a=>H(a.target.value),placeholder:"Filtre diagnostic...",className:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 pl-12 pr-6 text-sm text-zinc-300 focus:border-blue-500 outline-none transition-all"})]})}),e.jsxs("div",{className:"flex items-center gap-3 bg-white/5 p-2 rounded-2xl border border-white/10 shadow-xl backdrop-blur-md",children:[["all","ai","user","error"].map(a=>e.jsx("button",{onClick:()=>V(a),className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase transition-all ${B===a?"bg-blue-600 text-white shadow-lg":"text-zinc-500 hover:text-white"}`,children:a},a)),e.jsx("div",{className:"w-[1px] h-6 bg-white/10 mx-2"}),e.jsx("button",{onClick:ee,className:"p-2 text-zinc-600 hover:text-red-500 transition-all active:scale-90",children:e.jsx(ie,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{ref:xe,className:"flex-1 bg-black/60 border border-white/5 rounded-[3.5rem] p-10 font-mono text-sm overflow-y-auto custom-scrollbar-terminal shadow-inner relative",children:[Ee.length===0?e.jsx("div",{className:"h-full flex items-center justify-center opacity-10",children:e.jsx("p",{className:"text-xl font-black uppercase tracking-[0.5em] italic",children:"No Diagnostics Output"})}):Ee.map((a,w)=>e.jsxs("div",{className:"mb-4 flex gap-6 group hover:bg-white/[0.02] p-2 rounded-lg transition-colors border-b border-white/[0.02] last:border-0 pb-4",children:[e.jsxs("span",{className:"text-zinc-700 select-none font-bold tabular-nums",children:["[",new Date(a.timestamp).toLocaleTimeString(),"]"]}),e.jsxs("span",{className:`font-black uppercase text-[10px] mt-0.5 min-w-[60px] flex items-center gap-2 ${a.type==="ai"?"text-blue-400":a.type==="user"?"text-emerald-400":a.type==="error"?"text-red-400":"text-zinc-500"}`,children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${a.type==="ai"?"bg-blue-400 shadow-[0_0_8px_rgba(96,165,250,0.5)]":a.type==="user"?"bg-emerald-400":"bg-red-400"}`}),a.type]}),e.jsx("span",{className:`flex-1 leading-relaxed ${a.type==="error"?"text-red-300 font-bold":"text-zinc-300"}`,children:a.message})]},w)),e.jsx("div",{className:"h-10 w-full"})]})]},"logs"),M==="todos"&&e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-10",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-tight",children:"Post-it Manager Bridge"}),e.jsxs("div",{className:"flex items-center gap-4 bg-white/5 p-2 rounded-2xl border border-white/10 w-full max-w-md shadow-inner",children:[e.jsx("input",{value:pe,onChange:a=>ne(a.target.value),onKeyDown:a=>a.key==="Enter"&&(R(pe),ne("")),placeholder:"Action rapide...",className:"bg-transparent border-none outline-none flex-1 px-4 text-zinc-300 font-bold"}),e.jsx("button",{onClick:()=>{R(pe),ne("")},className:"p-3 bg-blue-600 rounded-xl text-white hover:bg-blue-700 transition-all active:scale-90",children:e.jsx(Ze,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[T.map(a=>e.jsxs("div",{className:`p-8 bg-white/5 rounded-[2.5rem] border flex items-center justify-between group transition-all ${a.completed?"opacity-40 grayscale":"border-white/5 hover:border-blue-500/20 shadow-xl"}`,children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("button",{onClick:()=>E(a.id),className:`w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all active:scale-90 ${a.completed?"bg-blue-600 border-blue-600 shadow-[0_0_15px_rgba(37,99,235,0.4)]":"border-zinc-700"}`,children:a.completed&&e.jsx(be,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xl font-bold ${a.completed?"line-through text-zinc-600":"text-zinc-200"}`,children:a.text}),e.jsx("span",{className:"text-[8px] text-zinc-600 uppercase font-black tracking-widest",children:new Date(a.timestamp).toLocaleString()})]})]}),e.jsx("button",{onClick:()=>Q(a.id),className:"p-4 opacity-0 group-hover:opacity-100 text-zinc-500 hover:text-red-500 transition-all active:scale-90",children:e.jsx(ie,{className:"w-5 h-5"})})]},a.id)),T.length===0&&e.jsxs("div",{className:"py-32 flex flex-col items-center justify-center opacity-10",children:[e.jsx(Ie,{className:"w-20 h-20 mb-4"}),e.jsx("p",{className:"text-xl font-black uppercase tracking-[0.3em]",children:"Liste Vide"})]})]})]},"todos"),M==="videos"&&e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-10",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-tight",children:"Video Avatar Engine"}),e.jsx("p",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest",children:"Gérez les séquences cinématiques"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:["intro","idle","talking","talkingx"].map(a=>e.jsxs("div",{className:"bg-white/5 p-10 rounded-[3.5rem] border border-white/5 flex flex-col items-center gap-6 group hover:border-blue-500/40 transition-all shadow-xl",children:[e.jsxs("div",{className:"w-24 h-24 bg-blue-600/10 rounded-[2.5rem] flex items-center justify-center text-blue-500 relative shadow-inner",children:[e.jsx(He,{className:"w-12 h-12"}),y[a]&&e.jsx(es,{className:"w-6 h-6 text-emerald-500 absolute -top-1 -right-1 shadow-lg"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-xl font-black text-white uppercase tracking-tight mb-1",children:a}),e.jsx("p",{className:"text-zinc-500 text-[10px] font-black uppercase tracking-widest opacity-60 italic",children:a==="intro"?"Phase de boot":a==="idle"?"Mode attente":"Séquence parole"})]}),e.jsxs("div",{className:"w-full relative",children:[e.jsx("input",{type:"file",accept:"video/*",onChange:w=>mt(a,w),className:"absolute inset-0 opacity-0 cursor-pointer z-10"}),e.jsxs("div",{className:"w-full py-4 bg-white/5 rounded-2xl flex items-center justify-center gap-3 border border-white/10 group-hover:bg-blue-600/20 group-hover:border-blue-500/40 transition-all shadow-md",children:[e.jsx(ia,{className:"w-4 h-4 text-zinc-400 group-hover:text-blue-400"}),e.jsx("span",{className:"text-[10px] font-black uppercase text-zinc-400 group-hover:text-blue-300",children:y[a]?"Changer Séquence":"Charger Vidéo"})]})]}),y[a]&&e.jsxs("div",{className:"w-full h-48 rounded-[2rem] overflow-hidden border border-white/5 relative bg-black shadow-inner",children:[e.jsx("video",{src:y[a],className:"w-full h-full object-cover opacity-60 transition-opacity group-hover:opacity-80",muted:!0,loop:!0,autoPlay:!0,playsInline:!0}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center group-hover:bg-black/40 transition-all",children:e.jsx("button",{onClick:w=>{w.stopPropagation(),S(a,null)},className:"p-4 bg-red-600/20 text-red-500 rounded-full hover:bg-red-600 hover:text-white transition-all active:scale-90 shadow-xl opacity-0 group-hover:opacity-100",children:e.jsx(ie,{className:"w-6 h-6"})})})]})]},a))}),e.jsxs("div",{className:"bg-blue-600/10 p-10 rounded-[3rem] border border-blue-500/20 flex items-center gap-8 shadow-2xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-500/10 blur-3xl rounded-full"}),e.jsx("div",{className:"p-5 bg-blue-600 rounded-2xl shadow-lg shadow-blue-900/40",children:e.jsx(xa,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"text-lg font-black text-white uppercase tracking-tight mb-1",children:"Optimisation des Transfères"}),e.jsx("p",{className:"text-sm text-blue-200/50 leading-relaxed italic",children:"Pour un rendu sans latence, privilégiez des formats MP4 encodés en H.264 avec un débit modéré. Les vidéos sont stockées localement sur votre appareil (IDB)."})]})]})]},"videos"),M==="settings"&&e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-12 max-w-2xl mx-auto pb-20",children:[e.jsxs("div",{className:"bg-white/5 p-10 rounded-[3.5rem] border border-white/5 shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-blue-600/5 blur-3xl rounded-full"}),e.jsxs("div",{className:"flex items-center gap-4 mb-10",children:[e.jsx(Js,{className:"w-6 h-6 text-blue-500"}),e.jsx("h4",{className:"text-xl font-black text-white uppercase tracking-tight",children:"Réglages Interface"})]}),e.jsxs("div",{className:"space-y-10",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 px-2",children:[e.jsx("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-[0.2em]",children:"Scale Avatar"}),e.jsxs("span",{className:"text-sm font-black text-blue-500 tabular-nums",children:[(C.scale*100).toFixed(0),"%"]})]}),e.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:C.scale,onChange:a=>A({scale:parseFloat(a.target.value)}),className:"w-full h-2 bg-white/5 rounded-full appearance-none cursor-pointer accent-blue-500 border border-white/5"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-[0.2em] mb-4 block px-2",children:"Axe Horizontal (X)"}),e.jsx("input",{type:"number",value:C.posX,onChange:a=>A({posX:parseInt(a.target.value)}),className:"w-full bg-black/40 border border-white/5 rounded-2xl p-5 text-white text-sm outline-none focus:border-blue-500 transition-all shadow-inner font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-[0.2em] mb-4 block px-2",children:"Axe Vertical (Y)"}),e.jsx("input",{type:"number",value:C.posY,onChange:a=>A({posY:parseInt(a.target.value)}),className:"w-full bg-black/40 border border-white/5 rounded-2xl p-5 text-white text-sm outline-none focus:border-blue-500 transition-all shadow-inner font-mono"})]})]})]})]}),e.jsxs("div",{className:"bg-white/5 p-10 rounded-[3.5rem] border border-white/5 shadow-xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(st,{className:"w-6 h-6 text-blue-500"}),e.jsx("h4",{className:"text-xl font-black text-white uppercase tracking-tight",children:"Voice Core Engine"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["Fenrir","Charon","Puck","Kore","Zephyr"].map(a=>e.jsxs("button",{onClick:()=>A({selectedVoice:a}),className:`p-6 rounded-2xl border flex items-center justify-between transition-all active:scale-95 shadow-md ${C.selectedVoice===a?"bg-blue-600 border-blue-500 text-white shadow-xl shadow-blue-900/30":"bg-black/40 border-white/5 text-zinc-400 hover:border-white/20"}`,children:[e.jsx("span",{className:"font-black uppercase tracking-[0.2em] text-[10px]",children:a}),e.jsx(st,{className:`w-4 h-4 ${C.selectedVoice===a?"opacity-100":"opacity-20"}`})]},a))}),e.jsxs("p",{className:"text-[10px] text-zinc-600 mt-6 uppercase tracking-widest font-black italic border-t border-white/5 pt-6 flex items-center gap-2",children:[e.jsx(ut,{className:"w-3 h-3"})," Note : Le changement de voix nécessite un reset de session Live."]})]}),e.jsxs("div",{className:"bg-white/5 p-10 rounded-[3.5rem] border border-white/5 shadow-xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(Xe,{className:"w-6 h-6 text-emerald-500"}),e.jsx("h4",{className:"text-xl font-black text-white uppercase tracking-tight",children:"Abdelmajid Personality Core"})]}),e.jsx("textarea",{value:te,onChange:a=>je(a.target.value),className:"w-full bg-black/40 border border-white/5 rounded-[2.5rem] p-8 text-zinc-300 font-medium text-sm h-72 outline-none focus:border-emerald-500 transition-all custom-scrollbar-terminal resize-none shadow-inner leading-relaxed",placeholder:"Définissez les règles de conduite de l'assistant..."}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:c,className:"px-10 py-4 bg-emerald-600/10 text-emerald-500 text-[10px] font-black uppercase tracking-[0.2em] rounded-xl border border-emerald-500/20 hover:bg-emerald-600 hover:text-white transition-all active:scale-95 shadow-lg",children:"Sauvegarder Instructions"})})]}),e.jsxs("div",{className:"bg-white/5 p-10 rounded-[3.5rem] border border-white/5 shadow-xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(ie,{className:"w-6 h-6 text-red-500"}),e.jsx("h4",{className:"text-xl font-black text-white uppercase tracking-tight",children:"Réinitialisation d'Usine"})]}),e.jsx("p",{className:"text-zinc-500 text-xs mb-8 font-black uppercase tracking-widest leading-relaxed opacity-60",children:"Attention : Cette action effacera définitivement tout le catalogue, les leads, les posters générés et les vidéos d'avatar stockées en local."}),e.jsx("button",{onClick:()=>{confirm("Supprimer TOUTES les données ? Cette action est irréversible.")&&G.getState().clearData()},className:"w-full py-6 bg-red-600/10 hover:bg-red-600 text-red-500 hover:text-white border border-red-500/20 rounded-2xl text-[10px] font-black uppercase tracking-[0.4em] transition-all active:scale-95 shadow-lg",children:"Wipe Control Tower Data"})]})]},"settings")]})})]})]}),e.jsx("style",{children:`
        .custom-scrollbar-terminal::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar-terminal::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar-terminal::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.05); border-radius: 10px; }
        .custom-scrollbar-terminal::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.1); }
        @keyframes ring {
          0% { transform: rotate(0); }
          5% { transform: rotate(15deg); }
          10% { transform: rotate(-15deg); }
          15% { transform: rotate(10deg); }
          20% { transform: rotate(-10deg); }
          25% { transform: rotate(0); }
          100% { transform: rotate(0); }
        }
        .animate-ring {
          animation: ring 2s infinite;
        }
      `})]})})},Ca="modulepreload",Ma=function(t){return"/"+t},rt={},Ta=function(i,s,r){let n=Promise.resolve();if(s&&s.length>0){let u=function(x){return Promise.all(x.map(m=>Promise.resolve(m).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),d=o?.nonce||o?.getAttribute("nonce");n=u(s.map(x=>{if(x=Ma(x),x in rt)return;rt[x]=!0;const m=x.endsWith(".css"),c=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${c}`))return;const p=document.createElement("link");if(p.rel=m?"stylesheet":Ca,m||(p.as="script"),p.crossOrigin="",p.href=x,d&&p.setAttribute("nonce",d),document.head.appendChild(p),m)return new Promise((S,y)=>{p.addEventListener("load",S),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${x}`)))})}))}function l(o){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=o,window.dispatchEvent(d),!d.defaultPrevented)throw o}return n.then(o=>{for(const d of o||[])d.status==="rejected"&&l(d.reason);return i().catch(l)})};function Aa(t={}){const{immediate:i=!1,onNeedRefresh:s,onOfflineReady:r,onRegistered:n,onRegisteredSW:l,onRegisterError:o}=t;let d,u;const x=async(c=!0)=>{await u};async function m(){if("serviceWorker"in navigator){if(d=await Ta(async()=>{const{Workbox:c}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:c}},[]).then(({Workbox:c})=>new c("/sw.js",{scope:"/",type:"classic"})).catch(c=>{o?.(c)}),!d)return;d.addEventListener("activated",c=>{(c.isUpdate||c.isExternal)&&window.location.reload()}),d.addEventListener("installed",c=>{c.isUpdate||r?.()}),d.register({immediate:i}).then(c=>{l?l("/sw.js",c):n?.(c)}).catch(c=>{o?.(c)})}}return u=m(),x}function La(t={}){const{immediate:i=!0,onNeedRefresh:s,onOfflineReady:r,onRegistered:n,onRegisteredSW:l,onRegisterError:o}=t,[d,u]=f.useState(!1),[x,m]=f.useState(!1),[c]=f.useState(()=>Aa({immediate:i,onOfflineReady(){m(!0),r?.()},onNeedRefresh(){u(!0),s?.()},onRegistered:n,onRegisteredSW:l,onRegisterError:o}));return{needRefresh:[d,u],offlineReady:[x,m],updateServiceWorker:c}}function Ia(){const{offlineReady:[t,i],needRefresh:[s,r],updateServiceWorker:n}=La({onRegistered(o){console.log("SW Registered: "+o)},onRegisterError(o){console.log("SW registration error",o)}}),l=()=>{i(!1),r(!1)};return e.jsx("div",{className:"ReloadPrompt-container",children:s&&e.jsxs("div",{className:"fixed bottom-0 right-0 m-6 p-6 rounded-lg shadow-xl bg-zinc-800 border border-zinc-700 z-[99999] max-w-sm",children:[e.jsx("div",{className:"mb-2 text-sm text-gray-200",children:e.jsx("span",{children:"Nouveau contenu disponible, cliquez pour mettre à jour."})}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[s&&e.jsx("button",{className:"px-4 py-2 text-sm font-semibold rounded bg-emerald-600 hover:bg-emerald-500 text-white transition-colors",onClick:()=>n(!0),children:"Mettre à jour"}),e.jsx("button",{className:"px-4 py-2 text-sm font-medium rounded border border-zinc-600 hover:bg-zinc-700 text-gray-300 transition-colors",onClick:()=>l(),children:"Fermer"})]})]})})}const _a=()=>{const{hasPermissions:t}=G();return e.jsx(F,{children:!t&&e.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/90 backdrop-blur-xl p-6",children:e.jsxs(N.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:"bg-zinc-900 w-full max-w-md rounded-[3rem] p-10 border border-white/5 shadow-2xl text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-600/10 rounded-3xl flex items-center justify-center mx-auto mb-8 text-blue-500",children:e.jsx(Cs,{className:"w-10 h-10 animate-pulse"})}),e.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight mb-4",children:"Accès Micro Requis"}),e.jsxs("p",{className:"text-zinc-400 text-sm leading-relaxed mb-8",children:["Pour que ",e.jsx("span",{className:"text-white font-bold",children:"Abdelmajid"})," puisse vous entendre et vous conseiller, nous avons besoin d'activer votre microphone."]}),e.jsxs("div",{className:"space-y-3 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-white/5 p-4 rounded-2xl border border-white/5",children:[e.jsx(fe,{className:"w-5 h-5 text-emerald-500"}),e.jsx("span",{className:"text-[10px] font-black uppercase text-zinc-300 tracking-widest",children:"Confidentialité Totale"})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-white/5 p-4 rounded-2xl border border-white/5",children:[e.jsx(ws,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{className:"text-[10px] font-black uppercase text-zinc-300 tracking-widest",children:"SSL Sécurisé"})]})]}),e.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full py-5 bg-blue-600 hover:bg-blue-700 text-white text-[10px] font-black uppercase tracking-[0.2em] rounded-2xl transition-all shadow-xl shadow-blue-900/20 flex items-center justify-center gap-2",children:[e.jsx(Zt,{className:"w-4 h-4"})," Autoriser le Micro"]}),e.jsx("p",{className:"mt-6 text-[8px] text-zinc-600 font-black uppercase tracking-widest",children:"T.T.A Distribution Tunis - Manager Bridge v3.2"})]})})})},za=()=>{const{loadStoredData:t,transcription:i,isLive:s,setPermissions:r,groundingChunks:n,showReportToast:l,leads:o,config:d,toggleConfig:u,isTransparent:x}=G(),[m,c]=f.useState(!0),[p,S]=f.useState(!1);f.useEffect(()=>{t();const b=async()=>{},v=async()=>{try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(T=>T.stop()),r(!0)}catch{console.warn("Permission micro refusée."),r(!1)}};return b(),v(),()=>{we()}},[]),f.useEffect(()=>{const b=v=>{v.ctrlKey&&v.shiftKey&&(v.key==="k"||v.key==="K")&&(v.preventDefault(),u())};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[u]);const y=o[0];return p?null:e.jsxs("div",{className:`fixed inset-0 pointer-events-none flex items-center justify-center overflow-hidden ${x?"bg-transparent":"bg-[#050505]"}`,children:[!x&&e.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",children:e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-[600px] bg-blue-900/20 blur-[150px] rounded-full"})}),e.jsx(_a,{}),e.jsx(F,{children:d.isMaintenanceMode&&e.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"flex flex-col items-center gap-6 max-w-sm text-center px-10",children:[e.jsx("div",{className:"w-20 h-20 bg-amber-500/10 rounded-full flex items-center justify-center text-amber-500",children:e.jsx(Ts,{className:"w-10 h-10 animate-pulse"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-amber-500 block mb-4",children:"Mode Maintenance Actif"}),e.jsx("p",{className:"text-zinc-200 text-lg font-bold leading-relaxed",children:d.maintenanceMessage}),e.jsxs("div",{className:"mt-8 flex items-center justify-center gap-2 text-zinc-500 text-[8px] font-black uppercase tracking-widest",children:[e.jsx(ut,{className:"w-3 h-3"})," Retour prévu dans quelques instants"]})]})]})})}),e.jsx(F,{children:l&&y&&e.jsx(N.div,{initial:{opacity:0,y:-50,x:"-50%"},animate:{opacity:1,y:0,x:"-50%"},exit:{opacity:0,y:-50,x:"-50%"},className:"fixed top-10 left-1/2 z-[200] pointer-events-auto",children:e.jsxs("div",{className:`px-8 py-5 rounded-3xl backdrop-blur-3xl border flex items-center gap-6 shadow-2xl ${y.priority==="urgent"?"bg-red-600/20 border-red-500/40":"bg-blue-600/20 border-blue-500/40"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${y.priority==="urgent"?"bg-red-600":"bg-blue-600"}`,children:e.jsx(Bt,{className:"w-6 h-6 text-white animate-bounce"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-black text-sm uppercase tracking-wider",children:"Prospect Détecté !"}),e.jsxs("p",{className:"text-zinc-300 text-xs font-bold uppercase",children:[y.customerName," : ",y.interestedProducts]})]})]})})}),e.jsxs("div",{className:"absolute bottom-[22%] left-1/2 -translate-x-1/2 w-full max-w-xl px-10 z-50 flex flex-col gap-4",children:[e.jsx(F,{children:n.length>0&&e.jsx(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"flex flex-wrap justify-center gap-2 mb-2",children:n.filter(b=>b.web&&b.web.uri).map((b,v)=>e.jsxs("button",{onClick:()=>window.open(b.web.uri,"_blank"),className:"pointer-events-auto flex items-center gap-2 bg-blue-600/10 border border-blue-500/20 px-3 py-1.5 rounded-full backdrop-blur-md hover:bg-blue-600/20 transition-all group",children:[e.jsx(us,{className:"w-3 h-3 text-blue-400"}),e.jsx("span",{className:"text-[10px] font-bold text-blue-300 max-w-[120px] truncate",children:b.web.title||"Lien"})]},v))})}),e.jsx(F,{mode:"wait",children:s&&(i.user||i.ai)&&e.jsxs(N.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex flex-col items-center",children:[e.jsxs("div",{className:`relative px-8 py-6 rounded-[2.5rem] shadow-2xl backdrop-blur-3xl border ${i.ai?"bg-zinc-900/80 text-white border-white/10":"bg-red-600/30 text-red-50 border-red-500/20 italic"}`,children:[i.ai&&e.jsx("div",{className:"absolute -top-3 left-8 px-3 py-1 bg-red-600 rounded-full flex items-center gap-2",children:e.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest text-white",children:"Expert Abdelmajid"})}),e.jsx("p",{className:`text-base font-bold leading-relaxed text-center ${i.ai?"":"text-sm opacity-80"}`,children:i.ai||i.user})]}),e.jsx("div",{className:`w-6 h-6 rotate-45 -mt-3 border-r border-b ${i.ai?"bg-zinc-900/80 border-white/10":"bg-red-600/30 border-red-500/20"}`})]},i.ai?"ai":"user")})]}),e.jsx("div",{className:"pointer-events-auto",children:e.jsx(Sa,{})}),e.jsxs("div",{className:"pointer-events-auto",children:[e.jsx(ka,{}),e.jsx(Ia,{})]})]})},xt=document.getElementById("root");if(!xt)throw new Error("Could not find root element to mount to");const Ra=jt.createRoot(xt);Ra.render(e.jsx(ot.StrictMode,{children:e.jsx(za,{})}));
